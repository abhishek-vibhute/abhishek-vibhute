<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <h1>GO to Inspect</h1>
    
</body>
</html>

<script>
    class vechile{
    constructor(type,regNumber){
       this.type = type;
       this.regNumber = regNumber;
    }
   }
   
   //inherticence this vechile class into
   //super()
   //constructortype, regNumber
   
   class Car extends vechile{
    constructor(type,regNumber){
      super(type,regNumber)
    }
   }

   class Bike extends vechile{
    constructor(type,regNumber){
      super(type,regNumber)
    }
   }

   class Truck extends vechile{
    constructor(type,regNumber){
      super(type,regNumber)
    }
   }


   //do smae things for trucks and bikes
   //slot-> flooor->parking lot

//    let c1 = new Car('car','mh15');
//    console.log(c1)
   
class Slot{
    #isbooked;
    constructor(number,type){
        this.number = number;
        this.type = type;
        this.#isbooked = false; //we need to change this value based on booking
    }

    //which is the value we need to set? -> isBOOKED

    get _isbooked(){
         return this.#isbooked
    }

    set _isbooked(bool){
        this.#isbooked = bool;
    }
}
   
let s1 = new Slot('1','bike');

// s1._isbooked(true)//wrong step

s1._isbooked = true;//value change (right step)
//    console.log(s1)





//each PF has 3 slots, we need to create this 3 slots and push it to PF.
class parkingFloor{
    constructor(floornumber,maxSlots){
        this.floornumber = floornumber;
        this.parkingSpots = [];

     
        for(let i = 0; i<maxSlots; i++)//it is not method
        {
            if(i === 0)
            {
                this.parkingSpots.push(new Slot(i,'Truck')); 
            }
            else if(i === 1)
            {
                this.parkingSpots.push(new Slot(i,'Bike'));
            }
            else
            {
                this.parkingSpots.push(new Slot(i,'Car'));
            }
        }

    }

//its only accept method
}


class ParkingLot{
    constructor(numberoffloors){
          this.numberoffloors = numberoffloors
          this.floors = []

          for(let  i = 0; i<numberoffloors; i++)
          {
            this.floors.push(new parkingFloor(i,numberoffloors));
          }
    }

    //we need to first check if slot is emty (isbooked = false)

    findSlot(type){
        //how many slots we have? - 9
        //eachfloor - 3 slots
        //do i need to cheack each floor?
        //do i need to cheak each slot of that floor?

        for(let i = 0; i<this.numberoffloors; i++)
        {
            //i=0 -> 1st floor

            for(let Slot of  this.floors[i].parkingSpots)
            {
                // console.log(Slot)

                //all the slot available here, now what?
                if(Slot.type === type && !Slot._isbooked)
                {
                   return {floornumber: i,found_Slot: Slot}
                }
            }
        }


    }

    Parkvechicle(vechile){
   //undefined

         let Slot = this.findSlot(vechile.type);

         Slot.found_Slot._isbooked = true;//_isbooked is a setter property which set #isbooked property

         console.log(Slot)

    
    }

    //issueTicket(vechicle,slot.floornumber)

}

//how to connect the lld to frontend?
//i worked on parking system
//i want to park vechicle








//inputbox >  type , regno-> parkbutton -> onclick ->park()

// function park(){
//    //accepted two vslue.value

//    if(type === 'Car'){
//     var c1 = new Car (name regNumber); // value coming form dom
//    }

//    p1.Parkvechicle(c1)
// }









// class TICKET{
//     constructor({

//     })
// }





let p1 = new ParkingLot(3);
let c1 = new Car('Car', 'MH15')
let c2 = new Car('Car', 'MH13')
let c3 = new Car('Car', 'MH41')
p1.Parkvechicle(c1);
p1.Parkvechicle(c2);
p1.Parkvechicle(c3);


// let pf = new parkingFloor(1,3);
// console.log(pf)
</script>